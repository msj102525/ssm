<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="inconvMapper">
	
	<resultMap type="InconvinienceBoard" id="resultList">
		<result property="boardNo" column="BOARD_NO" />
		<result property="writer" column="user_id" />
		<result property="boardTitle" column="BOARD_TITLE" />
		<result property="boardContent" column="BOARD_CONTENT" />
		<result property="writeDate" column="WRITE_DATE" />
		<result property="modifyDate" column="MODIFY_DATE" />
		<result property="status" column="STATUS" />
	</resultMap>

	<select id ="selectInconv" parameterType="_int" resultMap ="resultList">
		select * from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where board_no = #{boardno};
	</select>
	<select id ="selectListCount" resultType ="_int">
select count(*) from TB_INCONVINIENCE_BOARD left join TB_user on writer=id
	</select>
	<select id ="selectList" parameterType="Paging" resultMap ="resultList">
	select * from (select rownum rnum, BOARD_NO, WRITER, BOARD_TITLE, BOARD_CONTENT, WRITE_DATE, MODIFY_DATE, STATUS, user_id
                    from(select * from TB_INCONVINIENCE_BOARD left join TB_user on writer=id
                            order by write_date desc) )
	where rnum between #{startRow} and #{endRow}
		
	</select>
	<select id ="selectSearchTitleCount" parameterType="string"  resultType ="_int">
		select count(*) from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where board_title like '%${keyword}%'
	</select>
	<select id ="selectSearchTitle" parameterType="Search"  resultMap ="resultList">
	select * from (select rownum rnum, BOARD_NO, WRITER, BOARD_TITLE, BOARD_CONTENT, WRITE_DATE, MODIFY_DATE, STATUS, user_id
                    from(select * from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where board_title like '%${keyword}%'
                            order by write_date desc) )
	where rnum between #{startRow} and #{endRow}
	</select>
	<select id ="selectSearchWriterCount" parameterType="string"  resultType ="_int">
		select count(*) from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where user_id like '%${keyword}%'
	</select>
	<select id ="selectSearchWriter" parameterType="Search"  resultMap ="resultList">
	select * from (select rownum rnum, BOARD_NO, WRITER, BOARD_TITLE, BOARD_CONTENT, WRITE_DATE, MODIFY_DATE, STATUS, user_id
                    from(select * from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where user_id like '%${keyword}%'
                            order by write_date desc) )
	where rnum between #{startRow} and #{endRow}
	</select>
	<select id ="selectSearchDateCount" parameterType="SearchDate" resultType ="_int">
	select count(*) from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where write_date between #{begin} and #{end}
	</select>
	<select id ="selectSearchDate" parameterType="Search" resultMap ="resultList">
	select * from (select rownum rnum, BOARD_NO, WRITER, BOARD_TITLE, BOARD_CONTENT, WRITE_DATE, MODIFY_DATE, STATUS, user_id
                    from(select * from TB_INCONVINIENCE_BOARD left join TB_user on writer=id where write_date between #{begin} and #{end}
                            order by write_date desc) )
	where rnum between #{startRow} and #{endRow}
	</select>
</mapper>
